<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HpGaul - Info Spesifikasi Ponsel</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Poppins', 'sans-serif'],
                    },
                    colors: {
                        'ios-blue': '#007AFF',
                        'custom-gray': '#f0f0f0',
                        'dark-bg': '#1a1a1a',
                        'dark-text': '#e5e7eb',
                        'dark-card': '#2d3748',
                    }
                }
            }
        }
    </script>
    <style>
        body {
            padding-top: 4rem; /* Account for fixed navbar */
            transition: background-color 0.3s ease, color 0.3s ease;
        }
        .dark body {
            background-color: var(--dark-bg);
            color: var(--dark-text);
        }
        .card {
            background-color: white;
            border-radius: 0.75rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            margin-bottom: 1.5rem;
            padding: 1.5rem;
        }
        .dark .card {
            background-color: var(--dark-card);
        }
        .specs-table th, .specs-table td {
            padding: 0.75rem;
            text-align: left;
            border-bottom: 1px solid #e5e7eb;
        }
        .dark .specs-table th, .dark .specs-table td {
            border-bottom-color: #4a5568;
        }
        .specs-table th {
            font-weight: 600;
            color: #4b5563;
        }
        .dark .specs-table th {
            color: #cbd5e0;
        }
    </style>
</head>
<body class="bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-gray-100 font-sans antialiased">

    <nav class="bg-white dark:bg-gray-800 shadow-sm fixed top-0 left-0 right-0 z-20">
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <a href="/" class="flex-shrink-0 flex items-center">
                    <svg class="h-8 w-auto mr-2 text-ios-blue" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M4 2H20C21.1046 2 22 2.89543 22 4V20C22 21.1046 21.1046 22 20 22H4C2.89543 22 2 21.1046 2 20V4C2 2.89543 2.89543 2 4 2ZM8 6C7.44772 6 7 6.44772 7 7V17C7 17.5523 7.44772 18 8 18H9C9.55228 18 10 17.5523 10 17V7C10 6.44772 9.55228 6 9 6H8ZM12 10C11.4477 10 11 10.4477 11 11V17C11 17.5523 11.4477 18 12 18H13C13.5523 18 14 17.5523 14 17V11C14 10.4477 13.5523 10 13 10H12ZM16 8C15.4477 8 15 8.44772 15 9V17C15 17.5523 15.4477 18 16 18H17C17.5523 18 18 17.5523 18 17V9C18 8.44772 17.5523 8 17 8H16Z" />
                    </svg>
                    <span class="font-bold text-xl"><span class="text-gray-900 dark:text-white">Hp</span><span class="text-ios-blue">Gaul</span> Scraper</span>
                </a>
                <button id="dark-mode-toggle" class="p-2 rounded-md text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-ios-blue">
                    <svg id="icon-sun" class="h-6 w-6 block dark:hidden" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l.707.707M12 20.25a8.25 8.25 0 100-16.5 8.25 8.25 0 000 16.5z" />
                    </svg>
                    <svg id="icon-moon" class="h-6 w-6 hidden dark:block" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />
                    </svg>
                </button>
            </div>
        </div>
    </nav>

    <main class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8 mt-8">
        <div class="bg-white dark:bg-gray-800 shadow-xl rounded-lg p-6 md:p-8">
            <h1 class="text-3xl font-bold text-center text-gray-900 dark:text-white mb-8">Pencarian Spesifikasi Ponsel</h1>
            
            <form action="/scrape" method="GET" class="mb-8">
                <label for="url" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Masukkan URL GSMArena:</label>
                <div class="flex items-center">
                    <input type="text" id="url" name="url" placeholder="Contoh: https://www.gsmarena.com/samsung_galaxy_s23_ultra-12024.php" 
                           class="flex-grow shadow-sm focus:ring-ios-blue focus:border-ios-blue block w-full sm:text-sm border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-l-md p-3" 
                           value="<%= typeof gsmarenaUrl !== 'undefined' ? gsmarenaUrl : '' %>">
                    <button type="submit" 
                            class="bg-ios-blue hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-r-md transition duration-150 ease-in-out">
                        Cari
                    </button>
                </div>
            </form>

            <% if (error) { %>
                <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-6" role="alert">
                    <strong class="font-bold">Error:</strong>
                    <span class="block sm:inline"><%= error %></span>
                </div>
            <% } %>

            <% if (phoneData) { %>
                <div class="bg-white dark:bg-gray-800 shadow-xl rounded-lg overflow-hidden">
                    <div class="md:flex">
                        <div class="md:flex-shrink-0">
                            <img class="h-48 w-full object-cover md:w-48" src="<%= phoneData.img %>" alt="Gambar <%= phoneData.name %>">
                        </div>
                        <div class="p-8">
                            <div class="uppercase tracking-wide text-sm text-ios-blue font-semibold"><%= phoneData.name %></div>
                            <p class="block mt-1 text-lg leading-tight font-medium text-black dark:text-white"><%= phoneData.price %></p>
                            <div class="mt-4">
                                <% phoneData.specifications.forEach(category => { %>
                                    <h3 class="text-md font-semibold text-gray-900 dark:text-white mt-3 mb-1"><%= category.category %></h3>
                                    <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700 specs-table">
                                        <tbody class="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700">
                                            <% category.specifications.forEach(spec => { %>
                                                <tr>
                                                    <td class="px-3 py-2 whitespace-nowrap text-sm font-medium text-gray-500 dark:text-gray-400 w-1/3"><%= spec.name %></td>
                                                    <td class="px-3 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-gray-300"><%- spec.value %></td>
                                                </tr>
                                            <% }); %>
                                        </tbody>
                                    </table>
                                <% }); %>
                            </div>
                        </div>
                    </div>
                </div>
            <% } %>
        </div>
    </main>

    <script>
        // Dark mode toggle script
        const darkModeToggle = document.getElementById('dark-mode-toggle');
        const htmlElement = document.documentElement;

        // Set initial theme based on localStorage or system preference
        if (localStorage.getItem('theme') === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            htmlElement.classList.add('dark');
        } else {
            htmlElement.classList.remove('dark');
        }

        darkModeToggle.addEventListener('click', () => {
            htmlElement.classList.toggle('dark');
            if (htmlElement.classList.contains('dark')) {
                localStorage.setItem('theme', 'dark');
            } else {
                localStorage.setItem('theme', 'light');
            }
        });
    </script>
</body>
</html>

